# Каталог Книг

## Цель проекта

Целью проекта является создание каталога книг с реализацией REST интерфейса для работы с данными. В рамках проекта должна быть реализована система бронирования книг пользователями. Пользователи могут бронировать книги на определенное время и возвращать книги до окончания срока бронирования. Система также должна автоматически снимать книги с бронирования по истечении срока.

## Описание сущностей

### Книга (Book)

- **Название**: Название книги
- **Стоимость**: Стоимость книги (в формате `float`)
- **Кол-во страниц**: Количество страниц (в формате `int`)
- **Автор**: Один автор (связь с сущностью User)
- **Жанр**: Один или несколько жанров (связь с сущностью Genre)

### Пользователь (User)

- **Имя**: Имя пользователя
- **Фамилия**: Фамилия пользователя
- **Аватар**: URL аватара пользователя

### Жанр (Genre)

- **Название**: Название жанра

## Требования

- Проект должен использовать базу данных PostgreSQL, спроектированную согласно описанным сущностям.
- Реализовать CRUD операции для работы с сущностями.
- Реализовать фильтрацию книг по авторам, жанрам и стоимости.
- Архитектура проекта должна быть модульной (например, отдельные модули для `users`, `books` и т.д.).
- Подготовить тестовые данные для миграции в базу данных.
- Использовать фреймворки FastAPI и Celery.
- Подготовить Dockerfile для контейнеризации приложения и docker-compose для управления контейнерами.

## Установка и запуск

### Предварительные требования

1. Установите [Docker](https://www.docker.com/products/docker-desktop) и [Docker Compose](https://docs.docker.com/compose/install/).

### Запуск приложения

1. Клонируйте репозиторий:

    ```bash
    git clone https://github.com/Fastroer/Book_Catalog_REST.git
    cd Book_Catalog_REST
    ```

2. Создайте и запустите контейнеры с помощью Docker Compose:

    ```bash
    docker-compose up --build
    ```

3. Приложение будет доступно по адресу [http://localhost:8000](http://localhost:8000).

### Миграции и тестовые данные

- Для миграции данных используйте команду:

    ```bash
    docker-compose run --rm web alembic upgrade head
    ```

- Для загрузки тестовых данных используйте команду:

    ```bash
    docker-compose run --rm web python -m app.test_script.script_random_data
    ```

## API

### Книги

- **Создать книгу**: `POST /api/v1/books/`
- **Получить книгу по ID**: `GET /api/v1/books/{id}/`
- **Получить книги**: `GET /api/v1/books/`
- **Обновить книгу**: `PUT /api/v1/books/{id}/`
- **Удалить книгу**: `DELETE /api/v1/books/{id}/`

### Пользователи

- **Создать пользователя**: `POST /api/v1/users/`
- **Получить пользователя по ID**: `GET /api/v1/users/{id}/`
- **Получить пользователей**: `GET /api/v1/users/`
- **Обновить пользователя**: `PUT /api/v1/users/{id}/`
- **Удалить пользователя**: `DELETE /api/v1/users/{id}/`

### Жанры

- **Создать жанр**: `POST /api/v1/genres/`
- **Получить жанр по ID**: `GET /api/v1/genres/{id}/`
- **Получить жанры**: `GET /api/v1/genres/`
- **Обновить жанр**: `PUT /api/v1/genres/{id}/`
- **Удалить жанр**: `DELETE /api/v1/genres/{id}/`

### Бронирование

- **Создать бронирование**: `POST /api/v1/bookings/`
- **Получить бронирование по ID**: `GET /api/v1/bookings/{id}/`
- **Получить бронирования**: `GET /api/v1/bookings/`
- **Обновить бронирование**: `PUT /api/v1/bookings/{id}/`
- **Удалить бронирование**: `DELETE /api/v1/bookings/{id}/`
- **Отменить бронирование**: `POST /api/v1/bookings/{id}/cancel/`


